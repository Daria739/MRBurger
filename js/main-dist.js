"use strict";function createModal(){var t=document.createElement("div"),e=document.querySelector("#modal-template").innerHTML;t.className="popup",t.innerHTML=e;t.querySelector(".popup__content");var r=t.querySelector(".popup__title"),n=t.querySelector(".popup__text"),o=t.querySelector("#close-btn");return o.addEventListener("click",function(e){document.body.removeChild(t)}),t.querySelector(".overlay").addEventListener("click",function(e){document.body.removeChild(t)}),{open:function(){document.body.appendChild(t)},close:function(){o.click()},setContent:function(e,t){r.innerHTML=e,n.innerHTML=t}}}function validateForm(e){var t=!0;return validateField(e.elements.name)||(t=!1),validateField(e.elements.phone)||(t=!1),validateField(e.elements.comment)||(t=!1),t}function validateField(e){return e.checkValidity()?!(e.nextElementSibling.textContent=""):(e.nextElementSibling.textContent=e.validationMessage,!1)}function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",{width:"660",height:"405",videoId:"V5w1OGknhlc",playerVars:{controls:0,disablekb:0,showinfo:0,rel:0,autoplay:0,modestbranding:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerReady(e){var t=void 0,r=player.getDuration();clearInterval(t),updateTimerDisplay(),t=setInterval(function(){var e=player.getCurrentTime()/r*100;$(".player__playback-button").css({left:e+"%"}),updateTimerDisplay()},1e3)}function onPlayerStateChange(e){var t=$(".player__start");switch(e.data){case 1:t.addClass("paused"),$(".player__wrapper").addClass("active");break;case 2:t.removeClass("paused")}}function updateTimerDisplay(){$(".player__duration-estimate").text(formatTime(player.getDuration())),$(".player__duration-completed").text(formatTime(player.getCurrentTime()))}function formatTime(e){var t=Math.round(e),r=Math.floor(t/60),n=t-60*r;return r+":"+(n<10?"0"+n:n)}function editVolume(){0==player.getVolume()?player.setVolume("100"):player.setVolume("0")}function init(){for(var e=new ymaps.Map("map",{center:[59.94,30.32],zoom:12,controls:["zoomControl"],behaviors:["drag"]}),t=0;t<placemarks.length;t++){geoObjects[t]=new ymaps.Placemark([placemarks[t].latitude,placemarks[t].longitude],{hintContent:placemarks[t].hintContent,balloonContent:placemarks[t].balloonContent.join("")},{iconLayout:"default#image",iconImageHref:"./img/map-marker.png",iconImageSize:[46,57],iconImageOffset:[-23,-57]});var r=new ymaps.Clusterer({});e.geoObjects.add(r),r.add(geoObjects)}}var openBtn=document.querySelector(".menu-burger"),menu=document.querySelector(".menu-burger-mobile"),closeBtn=document.querySelector(".menu-burger-mobile-close"),opacity=.2,menuItem=document.querySelectorAll(".menu-burger-mobile__item");openBtn.addEventListener("click",function(){menu.classList.add("menu-burger-mobile_active"),menu.style.opacity=0,setTimeout(function e(){opacity<1&&(opacity+=.2,menu.style.opacity=opacity,setTimeout(e,80))},80)});for(var i=0;i<menuItem.length;i++)menuItem[i].addEventListener("click",function(){menu.classList.remove("menu-burger-mobile_active")});closeBtn.addEventListener("click",function(){setTimeout(function e(){0<opacity?(opacity-=.2,menu.style.opacity=opacity,setTimeout(e,80)):menu.classList.remove("menu-burger-mobile_active")},80)}),document.addEventListener("keydown",function(t){setTimeout(function e(){27===t.keyCode?(opacity-=.2,menu.style.opacity=opacity,setTimeout(e,80)):menu.classList.remove("menu-burger-mobile_active")},80)});var items=document.querySelectorAll(".team__item"),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=items[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var item=_step.value;item.addEventListener("click",function(e){var t=e.currentTarget,r=t.querySelector(".team__btn-content");t.classList.contains("active")?(t.classList.remove("active"),r.style.height=0):(Array.from(items).forEach(function(e){e.classList.remove("active"),e.querySelector(".team__btn-content").style.height=0}),t.classList.add("active"),r.style.height="100%")})}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var menuItems=document.querySelectorAll(".our-menu__item"),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=menuItems[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _menuItem=_step2.value;_menuItem.addEventListener("click",function(e){var t=e.currentTarget,r=t.querySelector(".our-menu__desc");t.classList.contains("active")?(t.classList.remove("active"),r.style.width=0):(Array.from(menuItems).forEach(function(e){e.classList.remove("active"),e.querySelector(".our-menu__desc").style.width=0}),t.classList.add("active"),r.style.width="100%")})}}catch(e){_didIteratorError2=!0,_iteratorError2=e}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var leftBtn=document.querySelector(".burgers__arrow-link_left"),rightBtn=document.querySelector(".burgers__arrow-link_right"),sliderItem=document.querySelector(".burgers__list"),step=sliderItem.firstElementChild.getBoundingClientRect().width,maxRight=(sliderItem.children.length-1)*step,minRight=0,currentRight=0;rightBtn.addEventListener("click",function(e){e.preventDefault(),currentRight<maxRight?currentRight+=step:currentRight=0,sliderItem.style.right=currentRight+"px"}),leftBtn.addEventListener("click",function(e){e.preventDefault(),minRight<currentRight?currentRight-=step:currentRight=maxRight,sliderItem.style.right=currentRight+"px"});for(var button=document.querySelectorAll(".js-open-btn"),modal=createModal(),_i=0;_i<button.length;_i++)button[_i].addEventListener("click",function(e){var t=e.currentTarget;contentWrap=t.parentNode;var r=contentWrap.querySelector(".reviews__title").innerHTML,n=contentWrap.querySelector(".reviews__text").innerHTML;modal.setContent(r,n),modal.open()});var myForm=document.querySelector(".form"),orderBtn=myForm.querySelector(".js-btn-sumbit"),clearBtn=myForm.querySelector(".js-btn-reset");myForm.addEventListener("submit",function(e){if(e.preventDefault(),validateForm(myForm)){var t=myForm.elements.name.value,r=myForm.elements.phone.value,n=myForm.elements.comment.value,o=new FormData;o.append("name",t),o.append("phone",r),o.append("comment",n),o.append("to","juicebox739@gmail.com"),console.log(o);var i=new XMLHttpRequest;i.responseType="json",i.open("POST","https://webdev-api.loftschool.com/sendmail"),i.send(o),i.addEventListener("load",function(e){if(i.response.status){modal.setContent("","Заказ оформлен"),modal.open(),setTimeout(function(e){clearBtn.click(),modal.close()},1500)}else{modal.setContent("","Заказ не оформлен"),modal.open(),clearBtn.click()}})}});var sections=$(".section"),display=$(".maincontent"),inScroll=!1,mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile(),switchActiveClassInSideMenu=function(e){$(".points__item").eq(e).addClass("active").siblings().removeClass("active")},performTransition=function(e){if(!inScroll){var t=parseInt(e);!1==!!t&&console.error("Неверное значение для sectionEq"),inScroll=!0;var r=-100*t+"%";sections.eq(e).addClass("active").siblings().removeClass("active"),display.css({transform:"translateY("+r+")"}),setTimeout(function(){inScroll=!1,switchActiveClassInSideMenu(e)},1300)}},scrollToSection=function(e){var t=sections.filter(".active"),r=t.next(),n=t.prev();"prev"===e&&n.length&&performTransition(n.index()),"next"===e&&r.length&&performTransition(r.index())};$(".wrapper").on("wheel",function(e){var t=e.originalEvent.deltaY;0<t&&scrollToSection("next"),t<0&&scrollToSection("prev")}),$(document).on("keydown",function(e){switch(e.keyCode){case 38:scrollToSection("prev");break;case 40:scrollToSection("next")}}),$("[data-scroll-to]").on("click",function(e){e.preventDefault();var t=parseInt($(e.currentTarget).attr("data-scroll-to"));performTransition(t)}),isMobile&&$(document).swipe({swipe:function(e,t,r,n,o,i){scrollToSection("down"===t?"up":"down")}});var player=void 0;$(".player__playback").on("click",function(e){var t=$(e.currentTarget),r=e.originalEvent.layerX/t.width()*100,n=player.getDuration()/100*r;player.seekTo(n)}),$(".player__splash").on("click",function(e){player.playVideo()}),$(".player__start").on("click",function(e){$(e.currentTarget);1!==player.getPlayerState()?player.playVideo():player.pauseVideo()}),ymaps.ready(init);var placemarks=[{latitude:59.97,longitude:30.31,hintContent:'<div class="map__hint">ул. Литераторов, д. 19</div>',balloonContent:['<div class="map__balloon></div>','<img class="map__burger-img" src="img/burger.png" alt="Бургер"/>',"Самые вкусные бургеры у нас! Заходите по адресу: ул. Литераторов, д. 19","</div>"]},{latitude:59.94,longitude:30.25,hintContent:'<div class="map__hint">Малый проспект В О, д 64</div>',balloonContent:['<div class="map__balloon></div>','<img class="map__burger-img" src="img/burger.png" alt="Бургер"/>',"Самые вкусные бургеры у нас! Заходите по адресу: Малый проспект В О, д 64","</div>"]},{latitude:59.93,longitude:30.34,hintContent:'<div class="map__hint">наб. реки Фонтанки, д. 56</div>',balloonContent:['<div class="map__balloon></div>','<img class="map__burger-img" src="img/burger.png" alt="Бургер"/>',"Самые вкусные бургеры у нас! Заходите по адресу: наб. реки Фонтанки, д. 56","</div>"]}],geoObjects=[];
//# sourceMappingURL=main-dist.js.map